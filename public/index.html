<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>papershamir</title>

    <script src="wasm_exec.js"></script>
    <script>
      const go = new Go();
      WebAssembly.instantiateStreaming(
        fetch("main.wasm"),
        go.importObject
      ).then((result) => {
        go.run(result.instance);
      });

      function splitSecret() {
        const input = document.getElementById("split-input");
        const output = document.getElementById("split-output");
        const parts = document.getElementById("parts");
        const threshold = document.getElementById("threshold");
        const result = shamirSplit(
          input.value.trim(),
          +parts.value,
          +threshold.value
        );

        input.value = "";
        output.innerHTML = "<pre>" + result + "</pre>";
      }

      function reassembleSecret() {
        const input = document.getElementById("reassemble-input");
        const output = document.getElementById("reassemble-output");
        const result = shamirCombine(input.value.trim());

        input.value = "";
        output.innerHTML = "<pre>" + result + "</pre>";
      }
    </script>
  </head>
  <body>
    <h2>papershamir</h2>

    <div>
      <h4>Split Secret</h4>
      <div>
        <label>
          Parts
          <input type="number" id="parts" min="2" value="5" />
        </label>
      </div>
      <br />
      <div>
        <label>
          Threshold
          <input type="number" id="threshold" min="2" value="3" />
        </label>
      </div>
      <p>Input:</p>
      <textarea id="split-input"></textarea>
      <br />
      <button onclick="splitSecret();">Split secret</button>
      <br />

      <code id="split-output"></code>
    </div>

    <hr />

    <div>
      <h4>Reassemble Secret</h4>
      <p>Input:</p>
      <textarea id="reassemble-input"></textarea>
      <br />
      <button onclick="reassembleSecret();">Reassemble</button>
      <br />

      <code id="reassemble-output"></code>
    </div>
  </body>
</html>
